<h2>
  <%= @driver.name %>
</h2>

<h3>
  <%= @driver.vin %>
</h3>

<h3>
  Status: <%= @driver.available ? "Available" : "Unavailable" %>
</h3>

<h3>
  <%= "Average rating: #{@driver.average_rating}" %>
</h3>

<h3>
  Total earnings: <%= number_to_currency(@driver.total_earnings/100.00, precision: 2, unit: "$") %>
</h3>

<ul>
<% trips = Trip.where(driver_id: @driver.id) %>
<% if trips %>
  <% trips.each do |trip| %>
    <li>
      <%= link_to trip.id,  driver_trip_path(@driver.id, trip.id) %>
      <%= trip.date %>
      
      <% if Driver.find_by(id: trip.driver_id).name == " Unknown Driver"%>
        Unknown Driver
      <% else %>
        <%= link_to Driver.find_by(id: trip.driver_id).name, driver_path(id: trip.driver_id) %>
      <% end %>

      <% if Passenger.find_by(id: trip.passenger_id).name == " Unknown Passenger"%>
        Unknown Passenger
      <% else %>
        <%= link_to Passenger.find_by(id: trip.passenger_id).name, passenger_path(id: trip.passenger_id) %>
      <% end %>

      <%= number_to_currency(trip.cost/100.00, precision: 2, unit: "$") %>
      <%= trip.rating %>
      <%= link_to "Edit", edit_passenger_trip_path(trip.passenger_id, trip.id), method: :get %>
      <%= link_to "Delete", driver_trip_path(@driver.id, trip.id), method: :delete %> 
    </li>
  <% end %>
<% end %>
</ul>

<%= link_to "Edit Driver", edit_driver_path(@driver.id) %>
<%= link_to "Back to All Drivers", drivers_path %>

<% if Driver.find_by(id: @driver.id).name != " Unknown Driver"%>
  <%= link_to "Delete #{@driver.name}", driver_path(@driver.id), method: :delete, data: { confirm: "Are you sure?" }%>
<% end %>



